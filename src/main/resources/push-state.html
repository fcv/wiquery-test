<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<title>Push State</title>
	<script type="text/javascript">
		$(function() {
			$("button").click(function() {
				var val = $("#input").val();
				if (!val) { 
					alert("please provide a value");
					return;
				}
				
				var state = { name: 'teste', age: 20};
				window.history.pushState(state, "title: " + val, "?" + val);				
			});
			
			$(window).bind('popstate', function(event) {
				alert("1 location: " + document.location + ", state: " + JSON.stringify(event.state));
			});

			window.onpopstate = function(event) {
				alert("2 location: " + document.location + ", state: " + JSON.stringify(event.state));
			};

		});
	</script>
</head>
<body>
	<h1>push state example</h1>
	<div>
		<input id="input" type="text" /><br/>
		<button type="button">go!</button>
	</div>
</body>
</html>